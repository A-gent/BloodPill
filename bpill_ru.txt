Blood Pill
----
Комплексная утилита для Blood Omen: Legacy Of Kain, 
предназначенная для манипуляций с pill.big и внутренними файлами Blood Omen

----------------------------------------
 ВВЕДЕНИЕ
----------------------------------------

 Отсутствие утилиты командной строки, способной работать с pill.big сподвигло меня
на написания этой маленькой программы.

 Программа написана на языке C, исходный код распространяется под лицензией GPL

 В исходном коде использованы наработки:
 ====
  - Forest [LordHavoc] Hale : утилитарные функции
  - XentaX community (www.xentax.com): спецификации pill.big
  - Klarth (stevemonaco@hotmail.com) и 
    Raul Sobon (Cheekyboy@2-hot.com) : спецификации TIM

 приятного чтения
 Павел [VorteX] Тимофеев
 paul.vortex@gmail.com

----------------------------------------
 КАК ИСПОЛЬЗОВАТЬ
----------------------------------------

 в квадратных скобках представлены не обязательные к использованию аргументы
 
 bpill.exe [-w] [-mem] [-nc] стадия
  -w : ждать нажатия клавиши до завершения работы
  -mem : статистика об использовании памяти
  -nc : не печатать заголовок (удобно если программа запускается циклом)

----------------------------------------
 СТАДИИ
----------------------------------------

Получение статистических сведений о pill.big:
====

 -bigfile [файл.big] -list [-to файл] [-klist файл]\n"
   -to: вывод в отдельный файл\n"
   -klist: использовать свой known-list(по умолчанию klist.txt)\n"

Распаковка .big файла:
====

 -bigfile [файл.big] -unpack [-dstdir папка] [-klist файл] [-tim2tga] [-16to24]
   -dstdir: своя папка назначение (по умолчанию bigfile)
   -tim2tga: автоконвертирования TIM в TGA
   -16to24: при конвертировании в TGA, преобразовывать 16-бит цветность в 24-бит

Запаковка .big файла:
====
Для нёё требуется listfile.txt и папка с исходными файлами, все это можно
получить операцией распаковки.

 -bigfile [файл.big] -pack [-srcdir папка] [-lowmem]
   -srcdir: своя исходная папка (по умолчанию 'bigfile')
   -lowmem: малой использование памяти за счет падения скорости обработки


Конвертирование TIM -> TGA
====

 -tim2tga файл.tim [файл.tga] [-16to24]
  -16to24: см. -unpack

Конвертирование TGA -> TIM
====

-tga2tim tgafile [timfile] [-bpp X] [-ofs X Y] [-mask X]
  -bpp: выбрать тип цветности (8 бит - палитра, 16 бит, 24 бит)
  -ofs: установить смещение для картинки (есть у некоторых файлов TIM)
  -mask: использовать свой файл маски (по умолчанию %имяфайла%_mask.%расширение_файла%)

----------------------------------------
 ИСТОРИЯ ВЕРСИЙ
----------------------------------------

=== ВЕРСИЯ 0.2 ===

ФИЧА: -tim2tga файл [-16to24] для конвертирования TIM-картинки в набор TGA файлов
 -16to24 - конвертирование 16-битной картинки в 24 битную

ФИЧА: -tga2tim файл [-bpp x] [-ofs XY] [-mask X] для конвертирования TGA файлов
 предупреждение: не обрабатывает мультислойные TIM (их в pill.big всего 2 или 3 штуки)
 -bpp - выбрать тип цветности (8 бит - палитра, 16 бит, 24 бит)
 -ofs - установить смещение для картинки (есть у некоторых файлов TIM)
 -mask - использовать 

КЛЮЧ: -tim2tga для -pillbig -unpack, распаковывает все TIM-картинки
 также прописывает в listfile.txt все необходимые параметры для последующей
 обратной запаковки (с помощью стадии -pack)

КЛЮЧ: -nc ПЕРЕД стадией (-bigfile, -tim2tga и пр.) для отмены печати заголовка программы

КЛЮЧ: -lowmem для стадии -pack, уменьшает требования к памяти за счет небольшого падения скорости

ФИЧА: автоопределение RIFF WAVE звуков при распаковке pill.big

ОБНОВЛЕНИЕ: список известный файлов теперь включает все диалоги 

ОБНОВЛЕНИЕ: расширение VAG изменено на RAW-ADPCM

=== СТАРТОВАЯ ВЕРСИЯ 0.1 ===

ФИЧА: вывод информации о всех файлах в pill.big
 bpill -bigfile [имябигфайла] -list [-to имяфайла]
 если [имябигфайла] не указано, то будет использоваться pill.big
 -to имяфайла - выводит список во внешний текстовый файл
 
ФИЧА: распаковка pill.big (распаковываются все файлы и лист-файл)
 bpill -bigfile [имябигфайла] -unpack [-dstdir имяпапки]
 -dstdir устанавливает папку назначения (по умолчанию bigfile)

ФИЧА: запаковка pill.big на базе набора файлов и лист-файла
 bpill -bigfile [имябигфайла] -pack [-srcdir имяпапки]
 -dstdir устанавливает исходную папку (по умолчанию bigfile)

ФИЧА: -bigfile: список известный файлов
 нужна чтобы определять RAW ADPCM файлы (голос персонажей, музыка)
 действует вместе с -list и -unpack
 чтобы активировать, в конце командной строки добавить:
 -klist klist.txt
 в архив с утилитой включен список известных VAG файлов klist.txt

ПАРАМЕТР: -w перед стадией ()
 
